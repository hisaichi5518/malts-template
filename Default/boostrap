#!/usr/bin/env perl
use strict;
use warnings;

use File::Spec;
use File::Basename;
use lib File::Spec->catdir(dirname(__FILE__), 'extlib', 'lib', 'perl5');
use lib File::Spec->catdir(dirname(__FILE__), 'lib');

use Proclet::Declare;
use Getopt::Long;
use MyApp::Config;

GetOptions(
    'kytprof'  => \my $kytprof,
);

color;
env(
    LM_DEBUG => 1,
);

my @opts = (
    $kytprof ? '-MDevel::KYTProf' : (),
);

service 'web', 'plackup', '-r', '-p', '50001', '-a', 'app.psgi', @opts;
service 'memcached', 'memcached', '-p', '11211';

run;
